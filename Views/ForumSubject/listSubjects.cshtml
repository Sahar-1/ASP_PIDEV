@model IEnumerable<PiDevEsprit.Models.ForumSubject>

@{
    ViewBag.Title = "Forum";
    Layout = "~/Views/front.cshtml";
}




<div class="central-meta item">

    <div class="d-flex mb-3">
        <h2>Forum</h2>
    </div>

    <div class="my-2 d-flex border-0 ">
        <div style="width:50%">
            <form method="post" class="filter-form">
                <input id="search_field" type="post" placeholder="Search post">
                @*<button><i class="ti-search"></i></button>*@
            </form>
        </div>
        <div style="margin-left:auto">
            <button type="button" style="margin-left:auto" class="mtr-btn mt-0"><span><i class="fa fa-plus"></i></span>  <span>@Html.ActionLink("New Topic", "Create")</span></button>
        </div>
    </div>

    <div class="forum-list">
        <table class="table table-responsive">
            <thead>
                <tr>
                    <th scope="col">forum</th>

                    <th scope="col" align="right"></th>
                    <th scope="col" align="right">vote</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            <i class="fa fa-comments"></i>

                            <h4 class="widget-title mb-3 forum-title">@Html.DisplayFor(modelItem => item.title)</h4>
                            <p> @Html.DisplayFor(modelItem => item.question)</p>

                            <p>@Html.DisplayFor(modelItem => item.postedDate)</p>

                        </td>
                        <td>
                            @Html.ActionLink("View", "listComments", "ForumComment", new { id = item.id }, null)
                        </td>

                        <td>  @Html.DisplayFor(modelItem => item.voteCount)</td>
                    </tr>
                }


            </tbody>
        </table>
    </div>
</div>



@section Scripts {
    <script type="text/javascript">

        $(document).ready(function () {
            $('#search_field').keyup(function () {
                var searchKey = $('#search_field').val();
                if (searchKey === null || searchKey === '') {
                    $('.forum-title').each(function () {
                        $(this).parent().parent().attr('hidden', false);
                    })
                } else {
                    $('.forum-title').each(function () {
                        if ($(this).html().includes(searchKey)) {
                            $(this).parent().parent().attr('hidden', false);
                        } else {
                            $(this).parent().parent().attr('hidden', true);
                        }
                        
                    })
                }
               
            });
        });
    </script>
}



